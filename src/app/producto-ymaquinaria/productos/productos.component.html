<div class="columns mt-5">
    <div class="column is-3">
        <div class="card">
            <div class="card-content">
                <div class="field">
                    <label class="label">Cliente:</label>
                    <div class="control">
                        <div class="select">
                            <select id='cliente_Seleccionado' (change)='buscar_producto($event.target.value)' value=''>
                                <option value="">Seleccionar Cliente</option>
                                <option *ngFor='let cliente of CLIENTES' value='{{cliente._id}}'>{{cliente.nombre}}</option>
                            </select>
                        </div>
                    </div>
                </div>
                <button class="button is-primary" (click)='Modal_Cliente()'>Nuevo Cliente</button>
            </div>
        </div>
    </div>
    <div class="column">
        <div class="card">
            <div class="card-content">
                <div class="titulo">Productos</div>
                <button class="button is-primary" (click)='Modal_Producto()' disabled id='NP_button'>Nuevo Producto</button>
                <hr>
                <table class="table is-fullwidth">
                    <thead>
                        <tr>
                            <th>Especificación</th>
                            <th>Nombre del Producto</th>
                            <th>Ver</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor='let producto of PRODUCTOS;let i = index'>
                            <td>E {{producto.cliente.codigo}} - {{producto.codigo}} - {{producto.version}} - {{producto.edicion}}</td>
                            <td>{{producto.producto}}</td>
                            <td><button class="button is-primary" (click)='verProducto(producto._id)'>Ver</button></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<div class="modal" [ngClass]="{'is-active':NUEVO_CLIENTE}">
    <div class="modal-background" (click)='Modal_Cliente()'></div>
    <div class="modal-card">
        <div class="modal-card-body">
            <form
            autocomplete="off"
            [formGroup]="ClienteForm"
            (ngSubmit)="addCliente()">
                <div class="subtitulo">Nuevo Cliente</div>
                <hr>
                <div class="columns">
                    <div class="column">
                        <div class="field">
                            <label class="label">Nombre del Cliente</label>
                            <div class="control">
                                <input type="text" class="input" formControlName='nombre'>
                            </div>
                        </div>
                    </div>
                    <div class="column is-3">
                        <div class="field">
                            <label class="label">Cód. Cliente</label>
                            <div class="control">
                                <input type="text" class="input" formControlName='codigo'>
                            </div>
                        </div>
                    </div>
                </div>                
                <button class="button is-primary">Nuevo Cliente</button>
            </form>
        </div>
    </div>
</div>

<div class="modal" [ngClass]="{'is-active':NUEVO_PRODUCTO}">
    <div class="modal-background" (click)='Modal_Producto()'></div>
    <div class="modal-card">
        <div class="modal-card-body tabla">
            <div class="subtitulo">
                Nuevo Producto
            </div>
            <div class="separador">
                Información del producto
            </div>
            <br>
            <div class="columns">
                <div class="column">
                    <div class="field">
                        <label class="label">Nombre Producto</label>
                        <div class="control">
                            <input type="text" class="input" id='nombre_nuevo_producto'>
                        </div>
                    </div>
                </div>
            </div>
            <div class="columns">
                <div class="column">
                    <div class="field">
                        <label class="label">Categoria</label>
                        <div class="select">
                            <select id='grupo_producto'>
                                <option *ngFor='let grupo of GRUPOS' value="{{grupo._id}}">{{grupo.nombre}}</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="column">
                    <div class="field">
                        <label class="label">Cod. Producto</label>
                        <div class="control">
                            <input type="text" class="input" id='cod_producto'>
                        </div>
                    </div>
                </div>
            </div>
            <div class="columns">
                <div class="column">
                    <div class="field">
                        <label class="label">Version</label>
                        <div class="control">
                            <input type="text" class="input" id='version'>
                        </div>
                    </div>
                </div>
                <div class="column">
                    <div class="field">
                        <label class="label">Especificación</label>
                        <div class="control">
                            <input type="text" class="input" id='edicion'>
                        </div>
                    </div>
                </div>
            </div>
            <div class="separador">
                Especificaciones
            </div>
            <br>

            <div class="columns">
                <div class="column">
                    <div class="field">
                        <label class="label">Ejemplares Montados:</label>
                        <div class="control">
                            <input type="number" class="input" min='1' value="1" (change)='Ejemplar($event)'>
                        </div>
                    </div>
                </div>
                <!-- <div class="column">
                    <div class="field">
                        <label class="label"> <br> Ancho:</label>
                        <div class="control">
                            <input type="text" class="input" id='ancho' (change)='ancho($event)'>
                        </div>
                    </div>
                </div>
                <div class="column">
                    <div class="field">
                        <label class="label"> <br> Largo:</label>
                        <div class="control">
                            <input type="text" class="input" id='largo' (change)='largo($event)' disabled>
                        </div>
                    </div>
                </div>
                <div class="column">
                    <div class="field">
                        <label class="label">Dirección de Fibra:</label>
                        <div class="control">
                            <div class="select">
                                <select name="d_fibra" id="d_fibra" disabled>
                                    <option value="{{dim}}" *ngFor='let dim of dimensiones'>{{dim}}</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div> -->
            </div>

            <div class="separador">
                Post Impresión
            </div>
            <br>
            <div class="columns">
                <div class="column">
                    <div class="field">
                        <label class="label">POST-IMPRESION</label>
                        <div class="select is-multiple">
                            <select  multiple value='Recto' id='p_i' (change)='post_impresion($event)'>
                                <option value="Recto">Corte Recto</option>
                                <option value="Doblado">Doblado</option>
                                <option value="Signado">Signado</option>
                                <option value="Fleje">De Fleje</option>
                                <option value="Molde">De Molde</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="column">
                    <ul>
                        <li *ngFor='let post of POST' (click)='borrarPost(post)'>{{post}}</li>
                    </ul>
                </div>
            </div>

            <!-- SELECCION DE SUSTRATO SACADO DE LAS BOBINAS *************** -->

            <!-- <div class="separador">
                Sustratos
            </div>
            <br>

            <div class="Sustrato" *ngIf='SUSTRATO.length > 0'>
                <div class="columns">
                    <div class="column">
                        {{SUSTRATO}} ({{dimensiones[0]}} x {{dimensiones[1]}})
                    </div>
                    <div class="column">
                        <button class="button is-danger is-outlined is-small" (click)='NuevoSustrato()'>
                            <span>Eliminar</span>
                            <span class="icon is-small">
                              <i class="fas fa-times"></i>
                            </span>
                          </button>
                    </div>
                </div>
            </div> -->

            <!-- <div class="done" *ngIf='!Sus_Done'>
                <div class="columns">
                    <div class="column">
                        <div class="field">
                            <label class="label">Sustrato</label>
                            <div class="control">
                                <input type="text" class="input" placeholder="Sustrato" id='sustrato_name'>
                            </div>
                        </div>
                    </div>
                    <div class="column">
                        <div class="field">
                            <label class="label">Marca</label>
                            <div class="control">
                                <input type="text" class="input" placeholder="Marca" id='sustrato_marca'>
                            </div>
                        </div>
                    </div>
                    <div class="column is-2">
                        <div class="field">
                            <label  class="label">Gramaje</label>
                            <div class="control">
                                <input type="text" class="input" placeholder="Gramaje" id='sustrato_gramaje'>
                            </div>
                        </div>
                    </div>
                    <div class="column is-2">
                        <div class="field">
                            <label  class="label">Calibre</label>
                            <div class="control">
                                <input type="text" class="input" placeholder="Calibre" id='sustrato_calibre'>
                            </div>
                        </div>
                    </div>
                    <!-- <div class="column">
                        <div class="field">
                            <br>
                            <button class="button is-success is-outlined" (click)='sustratos($event)'>
                                <span class="icon is-small">
                                  <i class="fas fa-check"></i>
                                </span>
                                <span>Agregar</span>
                              </button>
                        </div>
                    </div>
                </div>
            </div> -->
            <br>
                    
            <!--
            <div class="card">
                <div class="card-content">
                    <div class="field">
                        <label class="label">Tipo</label>
                        <div class="select">
                            <select id='sustrato'>
                                <option value="{{sustrato}}" *ngFor='let sustrato of SUSTRATO'>{{sustrato}}</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div> -->

            <div class="separador">
                Materia Prima
            </div>
            <br>

            <table class="table is-fullwidth">
                <thead>
                <tr>
                        <th>Materia</th>
                        <th>Marca</th>
                        <th>Cantidad</th>
                        <th>Eliminar</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor='let Material of MATERIALES_NECESARIOS'>
                        <td>{{Material.material}} 
                            <ng-container *ngIf='Material.ancho'>
                                ({{Material.ancho}} x {{Material.ancho}})
                            </ng-container>
                        </td>
                        <td>{{Material.marca}}</td>
                        <td>{{Material.cantidad}}</td>
                        <td>
                            <button class="button is-danger is-outlined is-small" (click)='Delete_Material(Material.material)'>
                                <span class="icon is-small">
                                  <i class="fas fa-check"></i>
                                </span>
                                <span>Eliminar</span>
                              </button>
                        </td>
                    </tr>
                </tbody>
            </table>


            <div class="columns">
                <div class="column">
                    <div class="field">
                        <label class="label">Categoria:</label>
                        <div class="select">
                            <select name="" id="" (change)='selecciona_producto($event.target.value)'>
                                <option value="0">Selecciona Categoria</option>
                                <option value="{{seccion.nombre}}" *ngFor='let seccion of SECCIONES'>{{seccion.nombre}}</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
            <div class="columns">
                <div class="column">
                    <div class="field">
                        <label class="label">Producto:</label>
                        <div class="select">
                            <select name="" id="Producto_select" (change)='producto_seleccionado($event.target.value)' disabled #producto>
                                <option value="0">Selecciona Producto</option>
                                <ng-container *ngFor='let producto of MATERIALES'>
                                    <ng-container *ngIf='producto.grupo.nombre === product_selected'>
                                        <option value="{{producto._id}}">{{producto.nombre}} ({{producto.marca}})
                                            <ng-container *ngIf='producto.ancho'>
                                                ({{producto.ancho}} x {{producto.largo}})
                                            </ng-container>
                                        </option>
                                    </ng-container>
                                </ng-container>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="column">
                    <div class="field" id='cant'>
                        <label class="label">Cantidad:</label>
                        <div class="control">
                            <input type="text" id='cantidad' class="input" #size [disabled]='!_producto_seleccionado'>
                        </div>
                    </div>
                </div>
            </div>
                <div class="field">
                    <label class="label"></label>
                    <div class="control">
                        <button class="button is-success is-outlined" (click)="add_materia(producto, size)">
                            <span class="icon is-small">
                              <i class="fas fa-check"></i>
                            </span>
                            <span>Agregar</span>
                          </button>
                    </div>
                </div>
            

            <!-- <div class="columns">
                <div class="column">
                    <div class="field">
                        <label class="label">Materia Prima</label>
                        <div class="control">
                            <input type="text" class="input" placeholder="Materia Prima" #material id='field_material'>
                        </div>
                    </div>
                </div>
                <div class="column">
                    <div class="field">
                        <label class="label">Marca</label>
                        <div class="control">
                            <input type="text" class="input" placeholder="Marca" #marca id='field_marca'>
                        </div>
                    </div>
                </div>
                <div class="column is-2">
                    <div class="field">
                        <label class="label">Cantidad</label>
                        <div class="control">
                            <input type="number" class="input" placeholder="cantidad" #cantidad id='field_cantidad'>
                        </div>
                    </div>
                </div>
                <div class="column is-3"><br>
                    <div class="field">
                        <label class="label"></label>
                        <div class="control">
                            <button class="button is-success is-outlined" (click)='add_materia(material, marca, cantidad)'>
                                <span class="icon is-small">
                                  <i class="fas fa-check"></i>
                                </span>
                                <span>Agregar</span>
                              </button>
                        </div>
                    </div>
                </div>
            </div> -->



            <!-- *****   SELECCION DE MATERIA PRIMA SACADO DEL INVENTARIO ****************** -->

            <!-- <div class="card" *ngFor='let grupo of GRUPOS_MATERIA'>
                <div class="card-content">
                    <b>{{grupo.nombre}}</b>
                    <table class="table is-striped is-fullwidth">
                        <thead>
                            <tr>
                                <th>Selecciona</th>
                                <th>Materia Prima</th>
                                <th><abbr title="Cantidad necesaria por cada 1000">Cantidad</abbr></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor='let material of MATERIALES'>
                                <ng-container *ngIf='material.grupo.nombre === grupo.nombre'>
                                    <td><input type="checkbox" name='necesario' (click)='enable(material.nombre)'></td>
                                    <td>{{material.nombre}}</td>
                                    <td><input type="number" class="input" id='{{material.nombre}}' (change)='just_a_sec($event)' disabled></td>
                                </ng-container>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div> -->
            <hr>
            <button class="button is-primary" (click)='finalizar()'>Registrar Producto</button>
        </div>
    </div>
</div>

<div class="modal" [ngClass]="{'is-active':VER_PRODUCTO}">
    <div class="modal-background" (click)='ver_Modal_Producto()'></div>
    <div class="modal-card">
        <div class="modal-card-body">
            <div class="separador">
                Identificacion del Producto
            </div>
            <br>
            <table class="table is-fullwidth">
                <tr>
                    <th>Cliente:</th>
                    <td>{{OneProduct.cliente.nombre}}</td>
                </tr>
                <tr>
                    <th>Producto</th>
                    <td>{{OneProduct.producto}}</td>
                </tr>
                <tr>
                    <th>Codigo del Producto</th>
                    <td>{{OneProduct.cliente.codigo}} - {{OneProduct.codigo}} - {{OneProduct.version}}</td>
                </tr>
            </table>
            <div class="separador">
                Materia Prima
            </div>
            <br>
            <table class="table is-fullwidth">
                <tr>
                    <th>Tipo de Sustrato: </th>
                    <td>{{OneProduct.sustrato[0].nombre}} {{OneProduct.sustrato[0].marca}}</td>
                </tr>
                <tr>
                    <th>Calibre (µm)</th>
                    <td>{{OneProduct.sustrato[0].calibre}}</td>
                </tr>
                <tr>
                    <th>Gramaje (g/m²)</th>
                    <td>{{OneProduct.sustrato[0].gramaje}}</td>
                </tr>
            </table>
        </div>
        <!-- <div class="modal-card-body tabla">
            <div class="subtitulo">
                Nuevo Producto
            </div>
            <div class="separador">
                Información del producto
            </div>
            <br>
            <div class="columns">
                <div class="column">
                    <div class="field">
                        <label class="label">Nombre Producto</label>
                        <div class="control">
                            <input type="text" class="input" id='nombre_nuevo_producto' value='{{OneProduct.producto}}'>
                        </div>
                    </div>
                </div>
            </div>
            <div class="columns">
                <div class="column">
                    <div class="field">
                        <label class="label">Categoria</label>
                        <div class="select">
                            <select id='grupo_producto' value='{{OneProduct.grupo._id}}'>
                                <option *ngFor='let grupo of GRUPOS' value="{{grupo._id}}">{{grupo.nombre}}</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="column">
                    <div class="field">
                        <label class="label">Cod. Producto</label>
                        <div class="control">
                            <input type="text" class="input" id='cod_producto' value='{{OneProduct.codigo}}'>
                        </div>
                    </div>
                </div>
                <div class="column">
                    <div class="field">
                        <label class="label">Version</label>
                        <div class="control">
                            <input type="text" class="input" id='version' value='{{OneProduct.version}}'>
                        </div>
                    </div>
                </div>
            </div>
            <div class="separador">
                Especificaciones
            </div>
            <br>

            <div class="columns">
                <div class="column">
                    <div class="field">
                        <label class="label">Ejemplares Montados:</label>
                        <div class="control">
                            <input type="number" class="input" min='1' value="1" (change)='Ejemplar($event)' value='{{OneProduct.ejemplares}}'>
                        </div>
                    </div>
                </div>
                <div class="column">
                    <div class="field">
                        <label class="label">Dim. de la hoja:</label>
                        <div class="control">
                            <input type="text" class="input" id='dimensiones' value='{{OneProduct.dimensiones}}'>
                        </div>
                    </div>
                </div>
                <div class="column">
                    <div class="field">
                        <label class="label">Dirección de Fibra:</label>
                        <div class="control">
                            <input type="text" class="input" id='d_fibra' value='{{OneProduct.fibra}}'>
                        </div>
                    </div>
                </div>
            </div>

            <div class="separador">
                Post Impresión
            </div>
            <br>
            <div class="columns">
                <div class="column">
                    <div class="field">
                        <label class="label">POST-IMPRESION</label>
                        <div class="select is-multiple">
                            <select  multiple value='Recto' id='p_i' (change)='post_impresion($event)'>
                                <option value="Recto">Corte Recto</option>
                                <option value="Doblado">Doblado</option>
                                <option value="Signado">Signado</option>
                                <option value="Fleje">De Fleje</option>
                                <option value="Molde">De Molde</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="column">
                    <ul>
                        <li *ngFor='let post of OneProduct.post' (click)='borrarPost2(post)'>{{post}}</li>
                    </ul>
                </div>
            </div>

            <div class="separador">
                Sustratos
            </div>
            <br>
            <div class="card">
                <div class="card-content">
                    <div class="field">
                        <label class="label">Tipo</label>
                        <div class="select">
                            <select id='sustrato' value='{{OneProduct.sustrato}}'>
                                <option value="{{sustrato}}" *ngFor='let sustrato of SUSTRATO'>{{sustrato}}</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
            <div class="separador">
                Materia Prima
            </div>
            <br>
            <div class="card" *ngFor='let grupo of GRUPOS_MATERIA'>
                <div class="card-content">
                    <b>{{grupo.nombre}}</b>
                    <table class="table is-striped is-fullwidth">
                        <thead>
                            <tr>
                                <th>Selecciona</th>
                                <th>Materia Prima</th>
                                <th><abbr title="Cantidad necesaria por cada 1000">Cantidad</abbr></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor='let material of OneProduct.materiales'>
                               
                                    <td><input type="checkbox" name='necesario' (click)='enable(material.nombre)' checked></td>
                                    <td>{{material.material}}</td>
                                    <td><input type="number" class="input" id='{{material.nombre}}' (change)='just_a_sec($event)' value='{{material.cantidad}}'></td>
                            </tr>
                            <tr *ngFor='let material of MATERIALES'>
                                <ng-container *ngIf='material.grupo.nombre === grupo.nombre'>
                                    <ng-container *ngIf='material.nombre == OneProduct.materiales.material'>
                                    <td><input type="checkbox" name='necesario' (click)='enable(material._id)'></td>
                                    <td>{{material.nombre}}</td>
                                    <td><input type="number" class="input" id='{{material._id}}' (change)='just_a_sec($event)' disabled></td>
                                    </ng-container>
                                </ng-container>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <hr>
        </div> -->
    </div>
</div><!--��U�n/o-���4����"l������@�㬐�<���0<�*�d��mrL.
cᤸS�I��Y��*&y;=�kg��"��������AB{D;��jy��9��k����A8Nܼ���?�?2(�w #~�8,���mv�y���Ȁ%HI���bQ���07���fl���Kl��7x��6�s��X�7|#���>Y�a��͏.�
�6��6���FR�&]3̈́#Z�
�cن��=K��wf�ڴ)�kK*�k��m�|�j���(����?�H�q�A�"�|� 4!Y�[:���7���eͦ �,R7��,�,�,��O�+a��, �,-->